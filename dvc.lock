schema: '2.0'
stages:
  parse:
    cmd: python src/data/vk_parser.py
    deps:
    - path: src/data/vk_parser.py
      hash: md5
      md5: e6c688080fee5d806975dbf4d2ef0c0a
      size: 2222
    outs:
    - path: data/raw/aviation.csv
      hash: md5
      md5: 22b8e90146bd6ed39d08a46d3e3c224d
      size: 1065897578
    - path: data/raw/road_transport.csv
      hash: md5
      md5: 2d820fd24e311d124beac073d37eb87d
      size: 3492498191
  preprocess:
    cmd: python src/data/preprocessor.py
    deps:
    - path: data/raw/aviation.csv
      hash: md5
      md5: 22b8e90146bd6ed39d08a46d3e3c224d
      size: 1065897578
    - path: data/raw/road_transport.csv
      hash: md5
      md5: 2d820fd24e311d124beac073d37eb87d
      size: 3492498191
    - path: src/data/preprocessor.py
      hash: md5
      md5: d051e0508aea71be51153de9226a57aa
      size: 2818
    outs:
    - path: data/processed/data_with_embeddings.pkl
      hash: md5
      md5: 62da2bdddf01f4e297eb47f685fc79fb
      size: 1171159214
    - path: data/processed/processed_data.csv
      hash: md5
      md5: f518020faa76abeb49ed11369fc1846f
      size: 768548402
  train:
    cmd: python src/models/train.py
    deps:
    - path: configs/train_config.yaml
      hash: md5
      md5: 401c381eee434ee2c90d4417c588e52e
      size: 141
    - path: data/processed/data_with_embeddings.pkl
      hash: md5
      md5: 62da2bdddf01f4e297eb47f685fc79fb
      size: 1171159214
    - path: src/models/train.py
      hash: md5
      md5: 78929d642985bcbb6952374d212112b1
      size: 2388
    outs:
    - path: models/classifier_model.pkl
      hash: md5
      md5: 2f8d0f55c4d4550565845c269311e9c5
      size: 3359
  convert:
    cmd: python src/models/convert_to_onnx.py
    deps:
    - path: models/classifier_model.pkl
      hash: md5
      md5: 2f8d0f55c4d4550565845c269311e9c5
      size: 3359
    - path: src/models/convert_to_onnx.py
      hash: md5
      md5: 1f1cd152ea6d86001644ac33d8fbf1f5
      size: 674
    outs:
    - path: triton_repo/classifier/1/model.onnx
      hash: md5
      md5: 60e49251b29e4ce5f3635f6b58b0ae3c
      size: 3509
