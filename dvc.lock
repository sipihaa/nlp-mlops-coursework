schema: '2.0'
stages:
  parse:
    cmd: python src/data/vk_parser.py
    deps:
    - path: src/data/vk_parser.py
      hash: md5
      md5: e6c688080fee5d806975dbf4d2ef0c0a
      size: 2222
    outs:
    - path: data/raw/aviation.csv
      hash: md5
      md5: 22b8e90146bd6ed39d08a46d3e3c224d
      size: 1065897578
    - path: data/raw/road_transport.csv
      hash: md5
      md5: 2d820fd24e311d124beac073d37eb87d
      size: 3492498191
  preprocess:
    cmd: python src/data/preprocessor.py
    deps:
    - path: data/raw/aviation.csv
      hash: md5
      md5: 22b8e90146bd6ed39d08a46d3e3c224d
      size: 1065897578
    - path: data/raw/road_transport.csv
      hash: md5
      md5: 2d820fd24e311d124beac073d37eb87d
      size: 3492498191
    - path: src/data/preprocessor.py
      hash: md5
      md5: 2969f3374d2d23575d1c83465181f4d0
      size: 2706
    outs:
    - path: data/processed/data_with_embeddings.pkl
      hash: md5
      md5: 4408a4626914f7f5319f505535242e4c
      size: 1166801774
    - path: data/processed/processed_data.csv
      hash: md5
      md5: d8f4aee11f3d16a9af2c993a53d678ae
      size: 764195827
  train:
    cmd: python src/models/train.py
    deps:
    - path: configs/train_config.yaml
      hash: md5
      md5: b0bee099122b2ed47fd07b392895f57a
      size: 435
    - path: data/processed/data_with_embeddings.pkl
      hash: md5
      md5: 4408a4626914f7f5319f505535242e4c
      size: 1166801774
    - path: src/models/train.py
      hash: md5
      md5: 9b28c3809942eee51458170c117448f5
      size: 2989
    outs:
    - path: models/classifier_model.pkl
      hash: md5
      md5: 454f25095649ff473568baa82891821b
      size: 3359
  convert:
    cmd: python src/models/convert_to_onnx.py
    deps:
    - path: models/classifier_model.pkl
      hash: md5
      md5: 454f25095649ff473568baa82891821b
      size: 3359
    - path: src/models/convert_to_onnx.py
      hash: md5
      md5: 1f1cd152ea6d86001644ac33d8fbf1f5
      size: 674
    outs:
    - path: triton_repo/classifier/1/model.onnx
      hash: md5
      md5: 2a61c16c841332ac5ec0234c3a9e6ba2
      size: 3509
